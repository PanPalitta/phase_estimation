<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Quantum Phase Estimation with Reinforcement Learning: Expanding the library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quantum Phase Estimation with Reinforcement Learning
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="md_download.html"><span>Download&#160;and&#160;Installation</span></a></li>
      <li><a href="md_usage.html"><span>Usage</span></a></li>
      <li><a href="md_expand.html"><span>Expanding&#160;the&#160;Library</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Expanding the library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The intention of this project is to create a library that can be used for solving multiple quantum control problems. The code is therefore designed to ease the process of including new problems and algorithms and make the selection of problems and algorithm as error-free as possible. The following document is a guide on how users can write and include their own problems and optimization algorithms to the existing library, and what is needed to customize and compile the code.</p>
<p>Readers are assumed to be familiar with population-based optimization algorithm, C++, object-oriented programming, class hierarchy and inheritance, and polymorphism.</p>
<h2>Program structure</h2>
<div class="image">
<img src="Phase_Est_diagram2.png"  alt="Diagram of program"/>
</div>
<h3>User-specified components</h3>
<p>The orange boxes correspond to the components in which the users specifies before the compiling the program. <code><a class="el" href="classPhase.html" title="Phase class for the problem of adaptive interferometric phase estimation including noise and loss...">Phase</a></code> class contains the modules for the adaptive phase estimation problem, which can be replaced with other problems. To select a problem of choice, replace <code><a class="el" href="classPhase.html" title="Phase class for the problem of adaptive interferometric phase estimation including noise and loss...">Phase()</a></code> by the constructor of the class in <code>main()</code> in the following line. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;problem = new Phase(numvar, gaussian_rng, uniform_rng);</div>
</div><!-- fragment --><p>The <a class="el" href="classPhase.html" title="Phase class for the problem of adaptive interferometric phase estimation including noise and loss...">Phase</a> class is accessed through the <code><a class="el" href="classProblem.html" title="Problem class contains the prototype of the functions in the optimization problem that OptAlg class n...">Problem</a></code> class. The pointer is given to the <code><a class="el" href="classOptAlg.html" title="OptAlg class contains the functions that can be used to contruct an optimization algorithm in the mai...">OptAlg</a></code> class to be used for computing the fitness values and accept-reject criteria.</p>
<h3>Optimization algorithms</h3>
<p>The choice of optimization algorithm is specified in the configuration file along with other parameters shown as an orange oval in figure. Otherwise, it can also be coded in <code>main()</code> in the following line if necessary.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;opt = new DE(problem, gaussian_rng, pop_size);</div>
</div><!-- fragment --><h3>MPI</h3>
<p>The MPI library is required for the program to run, as the program is designed to spread the solution candidate evenly on a group of processors. The processors communicates in the following situations.</p>
<ul>
<li>Constructing new set of candidates from existing population</li>
<li>Finding the best candidate in the population or subset of the population</li>
<li>Selecting the best candidate as solution</li>
</ul>
<h2>Add a new problem</h2>
<p>A new problem should be written as a class derived from <code><a class="el" href="classProblem.html" title="Problem class contains the prototype of the functions in the optimization problem that OptAlg class n...">Problem</a></code> class. There are five functions that user must include in the new problem.</p>
<ul>
<li><code>fitness()</code> is a function intended to be a wrapper for changing conditions in which the fitness function is evaluated.</li>
<li><code>avg_fitness()</code> is the function for calculating the fitness value.</li>
<li><code>T_condition()</code> is a function for calculating additional conditions for when the optimization algorithm is set to accept solution after T iteration.</li>
<li><code>error_condition()</code> is a function for calculating additional conditions for when optimization algorithm is set to accept solution from error bound.</li>
<li><code>boundary()</code> is used to keep the solution candidate within the boundary of the search space.</li>
</ul>
<p>This class does not use any MPI functionalities.</p>
<h2>Add new algorithm</h2>
<p>New algorithms can be added to the library of optimization algorithms by creating a derived class from the <code><a class="el" href="classOptAlg.html" title="OptAlg class contains the functions that can be used to contruct an optimization algorithm in the mai...">OptAlg</a></code> class. The functions are designed based on swarm intelligence algorithms and evolutionary algorithms which shares the same backbone functions for initializing the population, for selecting the final solution candidate, and so forth. Aspects that are specific to the algorithm, such as how the new candidates are generated and selected, are declared as virtual function in <code><a class="el" href="classOptAlg.html" title="OptAlg class contains the functions that can be used to contruct an optimization algorithm in the mai...">OptAlg</a></code> to allow the functions to be called from the derived class.</p>
<p>The functions, including virtual functions, are listed in <a class="el" href="classOptAlg.html" title="OptAlg class contains the functions that can be used to contruct an optimization algorithm in the mai...">OptAlg</a> class document.</p>
<h2>Constructing optimization algorithm</h2>
<p>The library provides the module for users to contract the optimization algorithm in <code>main()</code>. The basic structure of the algorithm is given in main.cpp, which compile to the following structure.</p>
<ul>
<li>Initialize MPI and setting is compute to spread the number of candidates evenly on the processors</li>
<li>Initialize problem and select the optimization algorithm</li>
<li>Population is initialized using a user specified method</li>
<li>The fitness values are computed and the population is prepared for the optimization</li>
<li>The iterative optimization commences until the solution satisfied the specified criterion</li>
<li>The program writes the fitness value, the solution, and the computational time as .dat files</li>
<li>Program terminates</li>
</ul>
<p>Most of these functionalities are in <code><a class="el" href="classOptAlg.html" title="OptAlg class contains the functions that can be used to contruct an optimization algorithm in the mai...">OptAlg</a></code> class.</p>
<p>For adaptive phase estimation, the program runs many consecutive optimization problems with different number of variables <em>N</em> and the accept-reject criteria changes for different sets of <em>N</em>, which is possible by changing conditions given to the optimization algorithm in <code>main()</code>.</p>
<h2>Changing the compilation setting</h2>
<p>When a new problem and/or algorithm is included to the library, the following line in <code>src\Makefile.in</code>,</p>
<p><code>OBJS=main.o candidate.o phase_loss_opt.o io.o problem.o mpi_optalg.o mpi_pso.o mpi_de.o candidate.o rng.o aux_functions.o</code>,</p>
<p>should be updated to include the new class. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
